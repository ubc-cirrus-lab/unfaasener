main:
    params: [fileName]
    steps:
    - init:
        assign:
        - project: ${sys.get_env("ubc-serverless-ghazal")}
        - location: "us-central1"
        - flip_url: "https://northamerica-northeast1-ubc-serverless-ghazal.cloudfunctions.net/BenchMark-IP-Flip"
        - rotate_url: "https://northamerica-northeast1-ubc-serverless-ghazal.cloudfunctions.net/BenchMark_IP_Rotate"
        - filter_url: "https://northamerica-northeast1-ubc-serverless-ghazal.cloudfunctions.net/Benchmark_IP_Filter"
        - gray_scale_url: "https://northamerica-northeast1-ubc-serverless-ghazal.cloudfunctions.net/Benchmark_IP_Gray_Scale"
        - resize_url: "https://northamerica-northeast1-ubc-serverless-ghazal.cloudfunctions.net/Benchmark_IP_Resize"
    - flip:
        call: http.post
        args:
          url: ${flip_url}
          body:
              message: ${fileName.fileName}
          auth:
              type: OIDC    
        result: pathlist_flip_resp
    - rotate:
        call: http.post
        args:
          url: ${rotate_url}
          body:
              message: ${fileName.fileName}
          auth:
              type: OIDC    
        result: pathlist_rotate_resp
    - filter:
        call: http.post
        args:
          url: ${filter_url}
          body:
              message: ${fileName.fileName}
          auth:
              type: OIDC    
        result: pathlist_filter_resp        
    - gray_scale:
        call: http.post
        args:
          url: ${gray_scale_url}
          body:
              message: ${fileName.fileName}
          auth:
              type: OIDC    
        result: pathlist_gray_scale_resp
    - resize:
        call: http.post
        args:
          url: ${resize_url}
          body: 
              message: ${fileName.fileName}
          auth:
              type: OIDC    
        result: pathlist_resize_resp    
    - end_process:
        return: ${pathlist_resize_resp}